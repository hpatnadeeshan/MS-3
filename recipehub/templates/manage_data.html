{% extends "base.html" %}
{% block content %}
<section class="manage-data">
    <h1>Manage Cuisines and Tools</h1>

    <!-- Add Cuisine Modal -->
    <aside class="modal fade" id="addCuisineModal" tabindex="-1" role="dialog" aria-labelledby="addCuisineModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <section class="modal-content">
                <header class="modal-header">
                    <h5 class="modal-title" id="addCuisineModalLabel">Add Cuisine</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </header>
                <section class="modal-body">
                    <form method="post" action="{{ url_for('add_cuisine') }}">
                        <div class="form-group">
                            <label for="cuisine_name">Cuisine Name:</label>
                            <input type="text" class="form-control" id="cuisine_name" name="cuisine_name" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Cuisine</button>
                    </form>
                </section>
            </section>
        </div>
    </aside>
    <!-- Add Tool Modal -->
    <aside class="modal fade" id="addToolModal" tabindex="-1" role="dialog" aria-labelledby="addToolModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <section class="modal-content">
                <header class="modal-header">
                    <h5 class="modal-title" id="addToolModalLabel">Add Tool</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </header>
                <section class="modal-body">
                    <form method="post" action="{{ url_for('add_tool') }}">
                        <label for="tool_name">Tool Name:</label>
                        <input type="text" id="tool_name" name="tool_name" required>
                        <br>
                        <label for="brand_name">Brand Name:</label>
                        <input type="text" id="brand_name" name="brand_name">
                        <br>
                        <button type="submit" class="btn btn-primary">Add Tool</button>
                    </form>
                </section>
            </section>
        </div>
    </aside>

    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addCuisineModal">
        Add Cuisine
    </button>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addToolModal">
        Add Tool
    </button>
    <h2>Cuisines</h2>
    <ul>
        {% for cuisine in cuisines %}
        <li>
            <a href="#" data-toggle="modal" data-target="#editCuisineModal{{ cuisine.id }}"><i
                    class="fas fa-edit"></i></a> <!-- Edit icon -->
            <a href="#" data-toggle="modal" data-target="#deleteCuisineModal{{ cuisine.id }}"><i
                    class="fas fa-trash"></i></a> <!-- Delete icon -->
            {{ cuisine.cuisine_name }}
        </li>

        <!-- Edit Cuisine Modal -->
        <aside class="modal fade" id="editCuisineModal{{ cuisine.id }}" tabindex="-1" role="dialog"
            aria-labelledby="editCuisineModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <section class="modal-content">
                    <header class="modal-header">
                        <h5 class="modal-title" id="editCuisineModalLabel">Edit Cuisine</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </header>
                    <section class="modal-body">
                        <!-- Edit Cuisine Form -->
                        <form action="{{ url_for('edit_cuisine', cuisine_id=cuisine.id) }}" method="post">
                            <label for="cuisine_name">Cuisine Name:</label>
                            <input type="text" id="cuisine_name" name="cuisine_name" value="{{ cuisine.cuisine_name }}"
                                required>
                            <br>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </section>
                </section>
            </div>
        </aside>
        <!-- Delete Cuisine Modal -->
        <aside class="modal fade" id="deleteCuisineModal{{ cuisine.id }}" tabindex="-1" role="dialog"
            aria-labelledby="deleteCuisineModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <section class="modal-content">
                    <header class="modal-header">
                        <h5 class="modal-title" id="deleteCuisineModalLabel">Confirm Deletion</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </header>
                    <section class="modal-body">
                        <p>Are you sure you want to delete the cuisine "{{ cuisine.cuisine_name }}"?</p>
                    </section>
                    <footer class="modal-footer">
                        <form action="{{ url_for('delete_cuisine', cuisine_id=cuisine.id) }}" method="post">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </form>
                    </footer>
                </section>
            </div>
        </aside>
        {% endfor %}
    </ul>

    <!-- List of Tools -->
    <h2>Tools</h2>
    <ul>
        {% for tool in tools %}
        <li>
            <a href="#" data-toggle="modal" data-target="#editToolModal{{ tool.id }}"><i class="fas fa-edit"></i></a>
            <!-- Edit icon -->
            <a href="#" data-toggle="modal" data-target="#deleteToolModal{{ tool.id }}"><i class="fas fa-trash"></i></a>
            <!-- Delete icon -->
            {{ tool.tool_name }} (Brand: {{ tool.brand_name }})
        </li>

        <!-- Edit Tool Modal -->
        <aside class="modal fade" id="editToolModal{{ tool.id }}" tabindex="-1" role="dialog"
            aria-labelledby="editToolModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <section class="modal-content">
                    <header class="modal-header">
                        <h5 class="modal-title" id="editToolModalLabel">Edit Tool</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </header>
                    <section class="modal-body">
                        <!-- Edit Tool Form -->
                        <form action="{{ url_for('edit_tool', tool_id=tool.id) }}" method="post">
                            <label for="tool_name">Tool Name:</label>
                            <input type="text" id="tool_name" name="tool_name" value="{{ tool.tool_name }}" required>
                            <br>
                            <label for="brand_name">Brand Name:</label>
                            <input type="text" id="brand_name" name="brand_name" value="{{ tool.brand_name }}" required>
                            <br>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </section>
                </section>
            </div>
        </aside>
        <!-- Delete Tool Modal -->
        <aside class="modal fade" id="deleteToolModal{{ tool.id }}" tabindex="-1" role="dialog"
            aria-labelledby="deleteToolModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <section class="modal-content">
                    <header class="modal-header">
                        <h5 class="modal-title" id="deleteToolModalLabel">Confirm Deletion</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </header>
                    <section class="modal-body">
                        <p>Are you sure you want to delete the tool "{{ tool.tool_name }}" (Brand: {{ tool.brand_name
                            }})?</p>
                    </section>
                    <footer class="modal-footer">
                        <form action="{{ url_for('delete_tool', tool_id=tool.id) }}" method="post">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </form>
                    </footer>
                </section>
            </div>
        </aside>
        {% endfor %}
    </ul>
</section>
{% endblock %}